import os
from flask import Flask, request
import telebot
import random

TOKEN = os.getenv('TELEGRAM_TOKEN', '8311052561:AAHrRZVKfw7BJLrpxdFx78DKBWZXr-NK2wg')
bot = telebot.TeleBot(TOKEN)
app = Flask(__name__)

quotes = [
    "–°–µ–≥–æ–¥–Ω—è –ª—É—á—à–∏–π –¥–µ–Ω—å —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å!",
    "–£—Å–ø–µ—Ö - —ç—Ç–æ –∏–¥—Ç–∏ –æ—Ç –Ω–µ—É–¥–∞—á–∏ –∫ –Ω–µ—É–¥–∞—á–µ, –Ω–µ —Ç–µ—Ä—è—è —ç–Ω—Ç—É–∑–∏–∞–∑–º–∞.",
    "–ú–µ—á—Ç—ã —Å–±—ã–≤–∞—é—Ç—Å—è, –µ—Å–ª–∏ –Ω–∞–¥ –Ω–∏–º–∏ —Ä–∞–±–æ—Ç–∞—Ç—å.",
    "–ü–∞–¥–∞–π —Å–µ–º—å —Ä–∞–∑, –≤—Å—Ç–∞–≤–∞–π –≤–æ—Å–µ–º—å.",
    "–í–µ–ª–∏–∫–∏–µ –¥–µ–ª–∞ —Ç—Ä–µ–±—É—é—Ç –≤–µ–ª–∏–∫–æ–≥–æ —Ç–µ—Ä–ø–µ–Ω–∏—è.",
    "–ö–∞–∂–¥—ã–π —ç–∫—Å–ø–µ—Ä—Ç –∫–æ–≥–¥–∞-—Ç–æ –±—ã–ª –Ω–æ–≤–∏—á–∫–æ–º.",
    "–ì–ª–∞–≤–Ω–æ–µ - –Ω–∞—á–∞—Ç—å, –∞ —Ç–∞–º —É–∂–µ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ!",
    "–¢—ã —Å–ø–æ—Å–æ–±–µ–Ω –Ω–∞ –±–æ–ª—å—à–µ–µ, —á–µ–º –¥—É–º–∞–µ—à—å!",
    "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å - –Ω–æ–≤–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ç–∞—Ç—å –ª—É—á—à–µ.",
    "–ú–∞–ª–µ–Ω—å–∫–∏–µ —à–∞–≥–∏ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –±–æ–ª—å—à–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º.",
    "–í–µ—Ä—å –≤ —Å–µ–±—è, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–∏–∫—Ç–æ –Ω–µ –≤–µ—Ä–∏—Ç.",
    "–ö–∞–∂–¥–∞—è –ø—Ä–æ–±–ª–µ–º–∞ - —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—É—á–∏—Ç—å—Å—è —á–µ–º—É-—Ç–æ –Ω–æ–≤–æ–º—É.",
    "–ù–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π –Ω–∞ –∑–∞–≤—Ç—Ä–∞ —Ç–æ, —á—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è.",
    "–¢–≤–æ–∏ –º—ã—Å–ª–∏ —Å–æ–∑–¥–∞—é—Ç —Ç–≤–æ—é —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å.",
    "–õ—É—á—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π - —Å–µ–π—á–∞—Å!",
    "–¢—Ä—É–¥–Ω–æ—Å—Ç–∏ –¥–µ–ª–∞—é—Ç –Ω–∞—Å —Å–∏–ª—å–Ω–µ–µ.",
    "–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–∑–¥–Ω–æ —Å—Ç–∞—Ç—å —Ç–µ–º, –∫–µ–º —Ç—ã —Ö–æ—á–µ—à—å –±—ã—Ç—å.",
    "–°–∞–º—ã–π –±–æ–ª—å—à–æ–π —Ä–∏—Å–∫ - –Ω–µ —Ä–∏—Å–∫–æ–≤–∞—Ç—å –≤–æ–æ–±—â–µ.",
    "–£ —Ç–µ–±—è –µ—Å—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è —É—Å–ø–µ—Ö–∞.",
    "–î–µ–π—Å—Ç–≤–∏–µ - –∫–ª—é—á –∫ —É—Å–ø–µ—Ö—É.",
    "–°–æ–º–Ω–µ–Ω–∏—è —É–±–∏–≤–∞—é—Ç –±–æ–ª—å—à–µ –º–µ—á—Ç–∞–Ω–∏–π, —á–µ–º –Ω–µ—É–¥–∞—á–∏.",
    "–ù–∞—á–Ω–∏ —Å —Ç–æ–≥–æ, —á—Ç–æ —É —Ç–µ–±—è –µ—Å—Ç—å.",
    "–ë—É–¥—É—â–µ–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–µ–º, –∫—Ç–æ –≤–µ—Ä–∏—Ç –≤ —Å–≤–æ–∏ –º–µ—á—Ç—ã.",
    "–¢—ã –±–ª–∏–∂–µ –∫ —Ü–µ–ª–∏, —á–µ–º –±—ã–ª –≤—á–µ—Ä–∞.",
    "–ü–æ–±–µ–¥–∞ - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —É–ø–æ—Ä—Å—Ç–≤–æ –≤ –¥–µ–π—Å—Ç–≤–∏–∏."
]

@bot.message_handler(commands=['start'])
def start(message):
    welcome_text = """
–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç-—Ü–∏—Ç–∞—Ç–Ω–∏–∫! ‚ú®
–ù–∞–ø–∏—à–∏ /quote —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—É—é —Ü–∏—Ç–∞—Ç—É
–ò–ª–∏ /help –¥–ª—è –ø–æ–º–æ—â–∏
    """
    bot.reply_to(message, welcome_text)

@bot.message_handler(commands=['help'])
def help_command(message):
    help_text = """
ü§ñ –ü–æ–º–æ—â—å –ø–æ –±–æ—Ç—É:

/start - –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
/quote - –ø–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—É—é –º–æ—Ç–∏–≤–∏—Ä—É—é—â—É—é —Ü–∏—Ç–∞—Ç—É
–ï—Å–ª–∏ –±–æ—Ç –Ω–µ –≤—ã–¥–∞—ë—Ç —Ü–∏—Ç–∞—Ç—ã, —Ç–æ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–π–¥–∏—Ç–µ –≤ Telegram!
    """
    bot.reply_to(message, help_text)

@bot.message_handler(commands=['quote'])
def quote(message):
    text = random.choice(quotes)
    bot.reply_to(message, text)

@app.route('/webhook', methods=['POST'])
def webhook():
    if request.headers.get('content-type') == 'application/json':
        json_string = request.get_data().decode('utf-8')
        update = telebot.types.Update.de_json(json_string)
        bot.process_new_updates([update])
        return ''
    return 'OK'

@app.route('/')
def home():
    return "Bot is running! Use Telegram to interact with me."

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)